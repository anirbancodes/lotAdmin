<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ADMIN</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="header">
      <h2>>> MyLot</h2>
      <div class="header-user">
        <p id="profile-email"></p>
      </div>
    </div>

    <!-- <button id="logoutBtn">Log out</button> -->
    <div style="display: flex; flex-direction: column">
      <!-- <a class="btn-submit" style="width: 90px" href="/pages/login.html"
        >login</a
      ><br /> -->
      <a
        class="btn-submit"
        style="width: max-content"
        href="/history/index.html"
        >Result</a
      ><br />
      <a
        class="btn-short"
        style="width: max-content"
        href="/pages/add-super.html"
        >Create new Super</a
      ><br />

      <a
        class="btn-short"
        style="width: max-content"
        href="/pages/send-credits-super.html"
        >Credit Transfer - Super</a
      ><br />
      <a
        class="btn-short"
        style="width: max-content; color: orangered; text-decoration: overline"
        href="/pages/check-dealer-sale.html"
        >Sale - Dealer</a
      ><br />
      <h3>Good afternoon Rohit bhai !</h3>
    </div>
  </body>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";

    import {
      getAuth,
      onAuthStateChanged,
      signOut,
    } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
    import { fc } from "/js/c.js";
    import {
      getDoc,
      doc,
      updateDoc,
      setDoc,
      arrayUnion,
    } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

    const app = initializeApp(fc);
    const db = getFirestore(app);
    const auth = getAuth();

    //const logoutBtn = document.getElementById("logoutBtn");
    /* logoutBtn.addEventListener("click", (e) => {
      signOut(auth)
        .then(() => {
          //logout
        })
        .catch((error) => {
          alert(error);
        });
    }); */

    onAuthStateChanged(auth, (user) => {
      if (user) {
        const uid = user.uid;
        // showUserEmail(user.email);
        // loadUserData(user.email);
      } else {
        window.location = "/pages/login.html";
      }
    });

    // async function loadUserData(email) {
    //   const ref = doc(db, "users", email);
    //   const docSnap = await getDoc(ref);
    //   if (docSnap.exists()) {
    //     let data = docSnap.data();
    //     showUserCredits(data.credit);
    //   }
    // }
  </script>
  <script></script>
</html>
